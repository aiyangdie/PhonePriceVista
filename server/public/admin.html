<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‰‹æœºä»·æ ¼ç®¡ç†åå°</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8fafc;
      min-height: 100vh;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 24px;
    }
    .header h1 { font-size: 24px; margin-bottom: 4px; }
    .header p { opacity: 0.8; font-size: 14px; }
    .nav {
      background: white;
      padding: 12px 24px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 16px;
    }
    .nav a {
      color: #64748b;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
    }
    .nav a:hover, .nav a.active {
      background: #f1f5f9;
      color: #1e293b;
    }
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 24px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .card h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: #1e293b;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px 8px;
      text-align: left;
      border-bottom: 1px solid #f1f5f9;
      font-size: 13px;
    }
    th {
      background: #f8fafc;
      font-weight: 600;
      color: #64748b;
      font-size: 12px;
      white-space: nowrap;
    }
    .btn {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .btn-success {
      background: #10b981;
      color: white;
    }
    .btn-secondary {
      background: #f1f5f9;
      color: #475569;
    }
    .btn-danger {
      background: #fef2f2;
      color: #dc2626;
    }
    .btn-edit {
      background: #eff6ff;
      color: #2563eb;
    }
    .btn-group { display: flex; gap: 6px; }
    .form-group {
      margin-bottom: 14px;
    }
    .form-group label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #374151;
    }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 13px;
    }
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
    }
    .form-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    .form-row-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    .status {
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
    }
    .status.success { background: #ecfdf5; color: #065f46; }
    .status.warning { background: #fffbeb; color: #92400e; }
    .status.danger { background: #fef2f2; color: #991b1b; }
    .phone-img {
      width: 45px;
      height: 45px;
      object-fit: contain;
      background: #f8fafc;
      border-radius: 4px;
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .stat-card .value {
      font-size: 28px;
      font-weight: 700;
      color: #1e293b;
    }
    .stat-card .label {
      font-size: 13px;
      color: #64748b;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    .modal.active { display: flex; }
    .modal-content {
      background: white;
      border-radius: 16px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid #f1f5f9;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
    }
    .modal-header h3 {
      font-size: 18px;
      color: #1e293b;
    }
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #64748b;
    }
    .modal-body {
      padding: 24px;
    }
    .modal-footer {
      padding: 16px 24px;
      border-top: 1px solid #f1f5f9;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      position: sticky;
      bottom: 0;
      background: white;
    }
    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #1e293b;
      margin: 20px 0 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid #667eea;
    }
    .section-title:first-child { margin-top: 0; }
    .price-highlight {
      color: #dc2626;
      font-weight: 700;
    }
    .official-price {
      color: #64748b;
      font-size: 11px;
    }
    .specs-preview {
      font-size: 11px;
      color: #64748b;
      max-width: 150px;
    }
    .toolbar {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
      align-items: center;
    }
    .search-box {
      flex: 1;
      min-width: 200px;
      padding: 8px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 13px;
    }
    .filter-select {
      padding: 8px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 13px;
      min-width: 120px;
    }
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-size: 14px;
      z-index: 2000;
      animation: slideIn 0.3s ease;
    }
    .toast.success { background: #10b981; }
    .toast.error { background: #ef4444; }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ğŸ“± æ‰‹æœºä»·æ ¼ç®¡ç†åå°</h1>
    <p>ç®¡ç†æ‰‹æœºæ•°æ®ã€å“ç‰Œã€ä»·æ ¼å’Œè¯¦ç»†å‚æ•°</p>
  </div>
  
  <div class="nav">
    <a href="/admin" class="active">ğŸ“Š æ•°æ®ç®¡ç†</a>
    <a href="/crawler">ğŸ”„ æ•°æ®çˆ¬å–</a>
  </div>

  <div class="container">
    <div class="stats">
      <div class="stat-card">
        <div class="value" id="totalPhones">-</div>
        <div class="label">æ‰‹æœºæ€»æ•°</div>
      </div>
      <div class="stat-card">
        <div class="value" id="totalBrands">-</div>
        <div class="label">å“ç‰Œæ•°é‡</div>
      </div>
      <div class="stat-card">
        <div class="value" id="avgPrice">-</div>
        <div class="label">å¹³å‡å–ä»·</div>
      </div>
      <div class="stat-card">
        <div class="value" id="withSpecs">-</div>
        <div class="label">æœ‰å‚æ•°æ•°æ®</div>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ“± æ‰‹æœºåˆ—è¡¨</h2>
      <div class="toolbar">
        <input type="text" class="search-box" id="searchBox" placeholder="æœç´¢å‹å·ã€å“ç‰Œ..." onkeyup="filterPhones()">
        <select class="filter-select" id="brandFilter" onchange="filterPhones()">
          <option value="">å…¨éƒ¨å“ç‰Œ</option>
        </select>
        <select class="filter-select" id="statusFilter" onchange="filterPhones()">
          <option value="">å…¨éƒ¨çŠ¶æ€</option>
          <option value="ç°è´§">ç°è´§</option>
          <option value="æ²¡è´§">æ²¡è´§</option>
          <option value="æ­£å¸¸">æ­£å¸¸</option>
        </select>
        <button class="btn btn-primary" onclick="openAddModal()">â• æ·»åŠ æ‰‹æœº</button>
        <button class="btn btn-success" onclick="location.href='/crawler'">ğŸ”„ åŒæ­¥å®˜æ–¹æ•°æ®</button>
      </div>
      <div style="overflow-x: auto;">
        <table>
          <thead>
            <tr>
              <th>å›¾ç‰‡</th>
              <th>å“ç‰Œ</th>
              <th>å‹å·</th>
              <th>é…ç½®</th>
              <th>é¢œè‰²</th>
              <th>å–ä»·</th>
              <th>å®˜æ–¹ä»·</th>
              <th>å‚æ•°</th>
              <th>çŠ¶æ€</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="phoneList">
            <tr><td colspan="10" style="text-align:center;color:#64748b;">åŠ è½½ä¸­...</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ç¼–è¾‘å¼¹çª— -->
  <div class="modal" id="editModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">ç¼–è¾‘æ‰‹æœº</h3>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editId">
        
        <div class="section-title">ğŸ“¦ åŸºæœ¬ä¿¡æ¯</div>
        <div class="form-row">
          <div class="form-group">
            <label>å“ç‰Œ *</label>
            <select id="editBrandId" required></select>
          </div>
          <div class="form-group">
            <label>å‹å· *</label>
            <input type="text" id="editModel" placeholder="å¦‚: Reno13" required>
          </div>
          <div class="form-group">
            <label>é¢œè‰² *</label>
            <input type="text" id="editColor" placeholder="å¦‚: é»‘è‰²" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>RAM (GB)</label>
            <input type="number" id="editRam" placeholder="å¦‚: 12">
          </div>
          <div class="form-group">
            <label>å­˜å‚¨ (GB)</label>
            <input type="number" id="editStorage" placeholder="å¦‚: 256">
          </div>
          <div class="form-group">
            <label>ç½‘ç»œç±»å‹</label>
            <select id="editNetworkType">
              <option value="5G">5G</option>
              <option value="4G">4G</option>
            </select>
          </div>
        </div>

        <div class="section-title">ğŸ’° ä»·æ ¼ä¿¡æ¯</div>
        <div class="form-row">
          <div class="form-group">
            <label>å–ä»· (æ‚¨çš„å”®ä»·) *</label>
            <input type="number" id="editPrice" placeholder="å¦‚: 2599" required>
          </div>
          <div class="form-group">
            <label>å®˜æ–¹ä»·æ ¼</label>
            <input type="number" id="editOfficialPrice" placeholder="å¦‚: 2699">
          </div>
          <div class="form-group">
            <label>åº“å­˜çŠ¶æ€</label>
            <select id="editAvailability">
              <option value="ç°è´§">ç°è´§</option>
              <option value="æ­£å¸¸">æ­£å¸¸</option>
              <option value="æ€•æŠ“">æ€•æŠ“</option>
              <option value="æ²¡è´§">æ²¡è´§</option>
            </select>
          </div>
        </div>

        <div class="section-title">ğŸ“¸ å›¾ç‰‡</div>
        <div class="form-group">
          <label>å›¾ç‰‡URL</label>
          <input type="text" id="editImageUrl" placeholder="https://...">
          <div id="imagePreview" style="margin-top:8px;"></div>
        </div>

        <div class="section-title">ğŸ“‹ è¯¦ç»†å‚æ•°</div>
        <div class="form-row">
          <div class="form-group">
            <label>ğŸ“± å±å¹•å°ºå¯¸</label>
            <input type="text" id="editScreenSize" placeholder="å¦‚: 6.7è‹±å¯¸">
          </div>
          <div class="form-group">
            <label>ğŸ”‹ ç”µæ± å®¹é‡</label>
            <input type="text" id="editBattery" placeholder="å¦‚: 5000mAh">
          </div>
          <div class="form-group">
            <label>ğŸ’» å¤„ç†å™¨</label>
            <input type="text" id="editCpu" placeholder="å¦‚: éªé¾™8 Gen3">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ğŸ“· æ‘„åƒå¤´</label>
            <input type="text" id="editCamera" placeholder="å¦‚: 5000ä¸‡åƒç´ ä¸‰æ‘„">
          </div>
          <div class="form-group">
            <label>âš–ï¸ é‡é‡</label>
            <input type="text" id="editWeight" placeholder="å¦‚: 195g">
          </div>
          <div class="form-group">
            <label>âš™ï¸ æ“ä½œç³»ç»Ÿ</label>
            <input type="text" id="editOs" placeholder="å¦‚: ColorOS 15">
          </div>
        </div>
        <div class="form-group">
          <label>ğŸ“ å°ºå¯¸</label>
          <input type="text" id="editDimensions" placeholder="å¦‚: 162.5Ã—75.3Ã—8.2mm">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
        <button class="btn btn-primary" onclick="savePhone()">ğŸ’¾ ä¿å­˜</button>
      </div>
    </div>
  </div>

  <script>
    const API_BASE = '/api/phones';
    let allPhones = [];
    let brands = [];

    // åŠ è½½å“ç‰Œåˆ—è¡¨
    async function loadBrands() {
      try {
        const res = await fetch(`${API_BASE}/brands`);
        brands = await res.json();
        
        const brandSelect = document.getElementById('editBrandId');
        const brandFilter = document.getElementById('brandFilter');
        
        brandSelect.innerHTML = brands.map(b => 
          `<option value="${b.id}">${b.name}</option>`
        ).join('');
        
        brandFilter.innerHTML = '<option value="">å…¨éƒ¨å“ç‰Œ</option>' + 
          brands.map(b => `<option value="${b.name}">${b.name}</option>`).join('');
      } catch (e) {
        console.error('åŠ è½½å“ç‰Œå¤±è´¥:', e);
      }
    }

    // åŠ è½½æ‰‹æœºåˆ—è¡¨
    async function loadPhones() {
      try {
        const res = await fetch(API_BASE);
        allPhones = await res.json();
        
        // æ›´æ–°ç»Ÿè®¡
        document.getElementById('totalPhones').textContent = allPhones.length;
        const brandSet = new Set(allPhones.map(p => p.brand_name));
        document.getElementById('totalBrands').textContent = brandSet.size;
        const avgPrice = allPhones.length > 0 
          ? Math.round(allPhones.reduce((s, p) => s + Number(p.price), 0) / allPhones.length)
          : 0;
        document.getElementById('avgPrice').textContent = 'Â¥' + avgPrice;
        const withSpecs = allPhones.filter(p => p.cpu || p.battery || p.screen_size).length;
        document.getElementById('withSpecs').textContent = withSpecs;
        
        renderPhones(allPhones);
      } catch (e) {
        document.getElementById('phoneList').innerHTML = 
          `<tr><td colspan="10" style="text-align:center;color:#dc2626;">åŠ è½½å¤±è´¥: ${e.message}</td></tr>`;
      }
    }

    // æ¸²æŸ“æ‰‹æœºåˆ—è¡¨
    function renderPhones(phones) {
      const tbody = document.getElementById('phoneList');
      if (phones.length === 0) {
        tbody.innerHTML = '<tr><td colspan="10" style="text-align:center;color:#64748b;">æš‚æ— æ•°æ®</td></tr>';
        return;
      }
      
      tbody.innerHTML = phones.map(p => `
        <tr>
          <td>
            ${p.image_url 
              ? `<img src="/api/image-proxy?url=${encodeURIComponent(p.image_url)}" class="phone-img" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2250%22>ğŸ“±</text></svg>'">`
              : '<span style="font-size:24px">ğŸ“±</span>'}
          </td>
          <td><strong>${p.brand_name || '-'}</strong></td>
          <td>${p.model}</td>
          <td>${p.ram || 0}GB + ${p.storage || 0}GB</td>
          <td>${p.color || '-'}</td>
          <td class="price-highlight">Â¥${Number(p.price).toLocaleString()}</td>
          <td>
            ${p.official_price ? `<span class="official-price">Â¥${Number(p.official_price).toLocaleString()}</span>` : '-'}
          </td>
          <td>
            <div class="specs-preview">
              ${p.cpu ? 'ğŸ’»' + p.cpu.substring(0,10) + '<br>' : ''}
              ${p.battery ? 'ğŸ”‹' + p.battery : ''}
            </div>
          </td>
          <td>
            <span class="status ${p.availability === 'ç°è´§' ? 'success' : p.availability === 'æ²¡è´§' ? 'danger' : 'warning'}">
              ${p.availability || 'æ­£å¸¸'}
            </span>
          </td>
          <td>
            <div class="btn-group">
              <button class="btn btn-edit" onclick="openEditModal(${p.id})">âœï¸ ç¼–è¾‘</button>
              <button class="btn btn-danger" onclick="deletePhone(${p.id})">ğŸ—‘ï¸</button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    // ç­›é€‰æ‰‹æœº
    function filterPhones() {
      const search = document.getElementById('searchBox').value.toLowerCase();
      const brand = document.getElementById('brandFilter').value;
      const status = document.getElementById('statusFilter').value;
      
      let filtered = allPhones.filter(p => {
        const matchSearch = !search || 
          p.model.toLowerCase().includes(search) || 
          (p.brand_name && p.brand_name.toLowerCase().includes(search));
        const matchBrand = !brand || p.brand_name === brand;
        const matchStatus = !status || p.availability === status;
        return matchSearch && matchBrand && matchStatus;
      });
      
      renderPhones(filtered);
    }

    // æ‰“å¼€æ·»åŠ å¼¹çª—
    function openAddModal() {
      document.getElementById('modalTitle').textContent = 'â• æ·»åŠ æ‰‹æœº';
      document.getElementById('editId').value = '';
      clearForm();
      document.getElementById('editModal').classList.add('active');
    }

    // æ‰“å¼€ç¼–è¾‘å¼¹çª—
    async function openEditModal(id) {
      try {
        const res = await fetch(`${API_BASE}/${id}`);
        const phone = await res.json();
        
        document.getElementById('modalTitle').textContent = 'âœï¸ ç¼–è¾‘æ‰‹æœº - ' + phone.model;
        document.getElementById('editId').value = phone.id;
        document.getElementById('editBrandId').value = phone.brand_id;
        document.getElementById('editModel').value = phone.model || '';
        document.getElementById('editColor').value = phone.color || '';
        document.getElementById('editRam').value = phone.ram || '';
        document.getElementById('editStorage').value = phone.storage || '';
        document.getElementById('editNetworkType').value = phone.network_type || '5G';
        document.getElementById('editPrice').value = phone.price || '';
        document.getElementById('editOfficialPrice').value = phone.official_price || '';
        document.getElementById('editAvailability').value = phone.availability || 'æ­£å¸¸';
        document.getElementById('editImageUrl').value = phone.image_url || '';
        document.getElementById('editScreenSize').value = phone.screen_size || '';
        document.getElementById('editBattery').value = phone.battery || '';
        document.getElementById('editCpu').value = phone.cpu || '';
        document.getElementById('editCamera').value = phone.camera || '';
        document.getElementById('editWeight').value = phone.weight || '';
        document.getElementById('editOs').value = phone.os || '';
        document.getElementById('editDimensions').value = phone.dimensions || '';
        
        // å›¾ç‰‡é¢„è§ˆ
        updateImagePreview();
        
        document.getElementById('editModal').classList.add('active');
      } catch (e) {
        showToast('åŠ è½½å¤±è´¥: ' + e.message, 'error');
      }
    }

    // æ›´æ–°å›¾ç‰‡é¢„è§ˆ
    function updateImagePreview() {
      const url = document.getElementById('editImageUrl').value;
      const preview = document.getElementById('imagePreview');
      if (url) {
        preview.innerHTML = `<img src="${url}" style="max-width:100px;max-height:100px;border-radius:8px;" onerror="this.style.display='none'">`;
      } else {
        preview.innerHTML = '';
      }
    }
    document.getElementById('editImageUrl').addEventListener('input', updateImagePreview);

    // å…³é—­å¼¹çª—
    function closeModal() {
      document.getElementById('editModal').classList.remove('active');
    }

    // æ¸…ç©ºè¡¨å•
    function clearForm() {
      ['editModel', 'editColor', 'editRam', 'editStorage', 'editPrice', 'editOfficialPrice',
       'editImageUrl', 'editScreenSize', 'editBattery', 'editCpu', 'editCamera', 
       'editWeight', 'editOs', 'editDimensions'].forEach(id => {
        document.getElementById(id).value = '';
      });
      document.getElementById('editNetworkType').value = '5G';
      document.getElementById('editAvailability').value = 'æ­£å¸¸';
      document.getElementById('imagePreview').innerHTML = '';
    }

    // ä¿å­˜æ‰‹æœº
    async function savePhone() {
      const id = document.getElementById('editId').value;
      const data = {
        brand_id: document.getElementById('editBrandId').value,
        model: document.getElementById('editModel').value,
        color: document.getElementById('editColor').value,
        ram: parseInt(document.getElementById('editRam').value) || 0,
        storage: parseInt(document.getElementById('editStorage').value) || 0,
        network_type: document.getElementById('editNetworkType').value,
        price: parseFloat(document.getElementById('editPrice').value) || 0,
        official_price: parseFloat(document.getElementById('editOfficialPrice').value) || null,
        availability: document.getElementById('editAvailability').value,
        image_url: document.getElementById('editImageUrl').value || null,
        screen_size: document.getElementById('editScreenSize').value || null,
        battery: document.getElementById('editBattery').value || null,
        cpu: document.getElementById('editCpu').value || null,
        camera: document.getElementById('editCamera').value || null,
        weight: document.getElementById('editWeight').value || null,
        os: document.getElementById('editOs').value || null,
        dimensions: document.getElementById('editDimensions').value || null,
      };
      
      if (!data.model || !data.brand_id) {
        showToast('è¯·å¡«å†™å“ç‰Œå’Œå‹å·', 'error');
        return;
      }
      
      try {
        const url = id ? `${API_BASE}/${id}` : API_BASE;
        const method = id ? 'PUT' : 'POST';
        
        const res = await fetch(url, {
          method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        if (!res.ok) throw new Error('ä¿å­˜å¤±è´¥');
        
        showToast(id ? 'ä¿®æ”¹æˆåŠŸ!' : 'æ·»åŠ æˆåŠŸ!', 'success');
        closeModal();
        loadPhones();
      } catch (e) {
        showToast('ä¿å­˜å¤±è´¥: ' + e.message, 'error');
      }
    }

    // åˆ é™¤æ‰‹æœº
    async function deletePhone(id) {
      if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ‰‹æœºå—?')) return;
      try {
        await fetch(`${API_BASE}/${id}`, { method: 'DELETE' });
        showToast('åˆ é™¤æˆåŠŸ!', 'success');
        loadPhones();
      } catch (e) {
        showToast('åˆ é™¤å¤±è´¥: ' + e.message, 'error');
      }
    }

    // æ˜¾ç¤ºæç¤º
    function showToast(msg, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = msg;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    // åˆå§‹åŒ–
    loadBrands();
    loadPhones();
  </script>
</body>
</html>
